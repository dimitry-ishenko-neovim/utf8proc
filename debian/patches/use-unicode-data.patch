Description: Use unicode-data instead of downloading external files
 Replace external links with copies of Unicode data and GNU Unifont
 provided by the packages unicode-data and ttf-unifont, respectively.
Author: Peter Colberg <peter@colberg.org>
Forwarded: not-needed
Last-Update: 2015-11-01
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/data/Makefile
+++ b/data/Makefile
@@ -23,10 +23,10 @@ utf8proc_data.c.new: data_generator.rb U
 UNIFONT_VERSION=8.0.01
 
 unifont.ttf:
-	$(CURL) $(CURLFLAGS) -o $@ $(URLCACHE)https://mirrors.kernel.org/gnu/unifont/unifont-$(UNIFONT_VERSION)/unifont-$(UNIFONT_VERSION).ttf
+	cp /usr/share/fonts/truetype/unifont/unifont.ttf $@
 
 unifont_upper.ttf:
-	$(CURL) $(CURLFLAGS) -o $@ $(URLCACHE)https://mirrors.kernel.org/gnu/unifont/unifont-$(UNIFONT_VERSION)/unifont_upper-$(UNIFONT_VERSION).ttf
+	cp /usr/share/fonts/truetype/unifont/unifont_upper.ttf $@
 
 %.sfd: %.ttf
 	$(FONTFORGE) -lang=ff -c "Open(\"$<\");Save(\"$@\");Quit(0);"
@@ -35,28 +35,28 @@ CharWidths.txt: charwidths.jl unifont.sf
 	$(JULIA) charwidths.jl > $@
 
 UnicodeData.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/UnicodeData.txt
+	cp /usr/share/unicode/UnicodeData.txt $@
 
 EastAsianWidth.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/EastAsianWidth.txt
+	cp /usr/share/unicode/extracted/DerivedEastAsianWidth.txt $@
 
 GraphemeBreakProperty.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt
+	cp /usr/share/unicode/auxiliary/GraphemeBreakProperty.txt $@
 
 DerivedCoreProperties.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/DerivedCoreProperties.txt
+	cp /usr/share/unicode/DerivedCoreProperties.txt $@
 
 CompositionExclusions.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/CompositionExclusions.txt
+	cp /usr/share/unicode/CompositionExclusions.txt $@
 
 CaseFolding.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/CaseFolding.txt
+	cp /usr/share/unicode/CaseFolding.txt $@
 
 NormalizationTest.txt:
-	$(CURL) $(CURLFLAGS) -o $@ -O $(URLCACHE)http://www.unicode.org/Public/UNIDATA/NormalizationTest.txt
+	bzip2 -d < /usr/share/unicode/NormalizationTest.txt.bz2 > $@
 
 GraphemeBreakTest.txt:
-	$(CURL) $(CURLFLAGS) $(URLCACHE)http://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.txt | $(PERL) -pe 's,÷,/,g;s,×,+,g' > $@
+	$(PERL) -pe 's,÷,/,g;s,×,+,g' < /usr/share/unicode/auxiliary/GraphemeBreakTest.txt > $@
 
 clean:
 	rm -f UnicodeData.txt EastAsianWidth.txt GraphemeBreakProperty.txt DerivedCoreProperties.txt CompositionExclusions.txt CaseFolding.txt NormalizationTest.txt GraphemeBreakTest.txt CharWidths.txt unifont*.ttf unifont*.sfd
